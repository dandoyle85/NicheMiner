export const onRequest = async () => {try{const url='https://trends.google.com/trends/api/realtimetrends?hl=en-US&tz=0&cat=all&fi=0&fs=0&geo=US&ri=100&rs=20&sort=0';const r=await fetch(url,{headers:{'User-Agent':'Mozilla/5.0'}});if(!r.ok)return new Response(JSON.stringify([]),{headers:{'content-type':'application/json'}});const txt=await r.text();const json=JSON.parse(txt.replace(/^\)\]\}',?/,''));const stories=json?.storySummaries?.trendingStories||[];const out=stories.slice(0,25).map(s=>({topic:s.title||(s.entityNames?.[0]||'Trend'),volume:(s.articles?.length||1),engagement:(s.articles?.length||1)*4,trend:'up',compIndex:.4,intent:'Info',source:'Trends'}));return new Response(JSON.stringify(out),{headers:{'content-type':'application/json'}});}catch(e){return new Response(JSON.stringify([]),{headers:{'content-type':'application/json'}});}};