export async function fetchSerpKeywords(query, apiKey){const r=await fetch('/api/serp?q='+encodeURIComponent(query));if(r.ok){return r.json();}const u='https://serpapi.com/search.json?'+new URLSearchParams({engine:'google',q:query,api_key:apiKey,gl:'us',hl:'en'}).toString();const rr=await fetch(u);if(!rr.ok)throw new Error('SERP HTTP '+rr.status);const j=await rr.json();const items=(j.organic_results||[]).slice(0,25).map(x=>({topic:x.title,volume:1,engagement:(x.position?60-x.position:5),trend:'up',compIndex:.6,intent:'Mixed',source:'SERP'}));return items;}