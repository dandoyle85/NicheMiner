
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auto Niche Miner Pro ‚Äî Phase 5 (Affiliate Hub + AdSense Readiness)</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body{margin:0;background:#0e1117;color:#e8eef7;font-family:system-ui,-apple-system,Segoe UI,Roboto}
  header{background:#0b1018;padding:12px;border-bottom:1px solid #22344d}
  nav{display:flex;gap:16px;margin-top:6px}
  nav a{color:#9bb0c5;text-decoration:none;font-size:14px}
  nav a.active{color:#4ea3ff;font-weight:600}
  .wrap{max-width:1260px;margin:0 auto;padding:14px}
  .card{background:#131a24;border:1px solid #22344d;border-radius:12px;padding:14px;margin-top:14px}
  .mini-card{background:#0f1623;border:1px solid #22344d;border-radius:10px;padding:10px;margin:8px 0}
  .btn{padding:8px 10px;border:none;border-radius:8px;cursor:pointer}
  .btn-apply{background:#2e7d32;color:#fff}
  .btn-secondary{background:#22344d;color:#cfe1ff}
  table{width:100%;border-collapse:collapse;font-size:13px;margin-top:10px}
  th,td{padding:8px;border-bottom:1px solid #1c2535;text-align:left}
  th{background:#0e1420;color:#a7b4c7;font-size:11px;text-transform:uppercase}
  .status-good{color:#2e7d32} .status-bad{color:#ff7043} .status-warn{color:#f9a825}
  #sitePanel{position:fixed;top:0;right:-36%;height:100%;width:36%;background:#0b1018;border-left:1px solid #22344d;box-shadow:-10px 0 30px rgba(0,0,0,.25);transition:right .3s ease;z-index:40}
  #sitePanel.open{right:0}
  #sitePanel .pad{padding:14px;overflow:auto;height:100%}
  #panelClose{position:absolute;top:8px;right:10px;background:transparent;color:#cfe1ff;border:none;font-size:18px;cursor:pointer}
  #exportModal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:60}
  #exportModal .sheet{background:#0b1018;padding:20px;border-radius:12px;max-width:420px;width:90%}
</style>
</head>
<body>
<header>
  <h1>üß≠ Auto Niche Miner Pro ‚Äî Phase 5</h1>
  <nav>
    <a href="#" class="active">Empire</a>
    <a href="#">Affiliate Hub</a>
  </nav>
</header>

<main class="wrap">
  <section class="card">
    <h3>üèÜ Empire Leaderboard</h3>
    <table id="leaderboard"><thead><tr><th>Site</th><th>Daily Rev</th><th>Status</th></tr></thead><tbody></tbody></table>
  </section>
</main>

<!-- Slide-in Site Panel -->
<aside id="sitePanel">
  <button id="panelClose">‚úñ</button>
  <div class="pad">
    <h3 id="panelTitle">Site Details</h3>
    <div class="mini-card">
      <strong>Summary</strong>
      <div id="siteSummary" class="sub">‚Äî</div>
    </div>
    <div class="mini-card">
      <strong>Affiliate Links</strong>
      <div id="affList" class="sub">Amazon Drones ‚úÖ (auto inject)</div>
    </div>
    <div class="mini-card">
      <strong>üìë AdSense Readiness</strong>
      <ul style="font-size:13px;line-height:1.5em">
        <li class="status-good">‚úÖ 12 Posts Published</li>
        <li class="status-good">‚úÖ About Page Found</li>
        <li class="status-bad">‚ùå Privacy Policy Missing</li>
        <li class="status-warn">‚ö†Ô∏è Internal Linking Low</li>
      </ul>
      <p>Status: <span class="status-bad">Not Ready</span></p>
      <button class="btn btn-secondary" id="fixAdsense">Fix Issues</button>
    </div>
    <div class="mini-card">
      <button class="btn btn-apply" id="exportPackBtn">üì¶ Export Niche Pack</button>
    </div>
  </div>
</aside>

<!-- Export Modal -->
<div id="exportModal">
  <div class="sheet">
    <h3>üì¶ Export Niche Pack</h3>
    <p>This pack will include:</p>
    <ul style="font-size:13px;line-height:1.6em">
      <li>Keywords (CSV)</li>
      <li>Blog drafts (MD/HTML)</li>
      <li>Affiliate links (JSON)</li>
      <li>Ebook outline (MD)</li>
      <li>Pin templates (PNG placeholders)</li>
    </ul>
    <button class="btn btn-apply" onclick="closeExport()">Download Fake Pack</button>
  </div>
</div>

<script type="module">
  import { getSites } from './supabase-client.js';

  let SITES = [];
  let currentSite = null;

  async function init(){
    SITES = await getSites();
    renderLeaderboard();
  }

  function renderLeaderboard(){
    const tbody = document.querySelector("#leaderboard tbody");
    tbody.innerHTML = "";
    const fakeSites = [
      {id:1,name:"DroneSite.com",revenue:240,status:"Hot"},
      {id:2,name:"FitnessTips.io",revenue:120,status:"Rising"},
      {id:3,name:"DIYPowerTools.net",revenue:80,status:"Cooling"}
    ];
    fakeSites.forEach(s=>{
      const tr = document.createElement("tr");
      tr.className="clickable";
      tr.onclick=()=> openSitePanel(s);
      tr.innerHTML = `<td>${s.name}</td><td>$${s.revenue}</td><td>${s.status}</td>`;
      tbody.appendChild(tr);
    });
  }

  function openSitePanel(site){
    currentSite=site;
    document.getElementById("panelTitle").textContent=site.name;
    document.getElementById("siteSummary").textContent="Revenue $"+site.revenue+" ‚Ä¢ Status "+site.status;
    document.getElementById("sitePanel").classList.add("open");
  }
  document.getElementById("panelClose").onclick=()=>{
    document.getElementById("sitePanel").classList.remove("open");
  }

  document.getElementById("fixAdsense").onclick=()=>{
    alert("Fixing issues: generating Privacy Policy & adding internal links...");
  };

  document.getElementById("exportPackBtn").onclick=()=>{
    document.getElementById("exportModal").style.display="flex";
  };

  window.closeExport=()=>{
    document.getElementById("exportModal").style.display="none";
    alert("Fake Niche Pack downloaded!");
  };

  init();
</script>
</body>
</html>
