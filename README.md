
# Auto Niche Miner Pro — Phase 7 (Full)

This build restores **Empire + Affiliate Hub + Niches** and wires **Niches → Supabase** saving.

## Pages
- **Empire**: Leaderboard, traffic chart, slide-in site panel, site AI coach, AI overview modal.
- **Affiliate Hub**: Mock competitor offers, "Sign Up", "Save Link" → persists to `affiliate_links`.
- **Niches**: Mock trending niches, drill keywords, **Save Selection** → inserts into `keywords`.

## Files
- `index.html` — all three pages + UI/logic
- `supabase-client.js` — Supabase helpers (sites, settings, affiliate_links, keywords)

## Supabase Requirements
Tables (you likely have most already):
```sql
create table if not exists sites (
  id bigint generated by default as identity primary key,
  name text,
  revenue int,
  traffic jsonb,
  status text
);

create table if not exists settings (
  id bigint generated by default as identity primary key,
  site_id bigint references sites(id) on delete cascade,
  aggression int,
  auto_blog boolean default false,
  auto_pins boolean default false,
  auto_shorts boolean default false
);

create table if not exists affiliate_links (
  id bigint generated by default as identity primary key,
  niche text,
  url text
);

create table if not exists keywords (
  id bigint generated by default as identity primary key,
  niche text,
  keyword text,
  volume int,
  competition text
);
```

RLS policies for demo (optional):
```sql
alter table sites enable row level security;
alter table settings enable row level security;
alter table affiliate_links enable row level security;
alter table keywords enable row level security;

create policy "public select" on sites for select using (true);
create policy "public upsert" on sites for insert with check (true);
create policy "public update" on sites for update using (true);

create policy "public select" on settings for select using (true);
create policy "public upsert" on settings for insert with check (true);
create policy "public update" on settings for update using (true);

create policy "public select" on affiliate_links for select using (true);
create policy "public insert" on affiliate_links for insert with check (true);

create policy "public select" on keywords for select using (true);
create policy "public insert" on keywords for insert with check (true);
```

## Cloudflare Pages
Set environment variables:
- `SUPABASE_URL`
- `SUPABASE_ANON_KEY`

Deploy with Framework: **None**, Build: *(blank)*, Output: `/`.
